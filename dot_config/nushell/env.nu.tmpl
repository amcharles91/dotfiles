{{- if ne .chezmoi.os "windows" -}}
# env.nu
# Nushell Environment Configuration

# Source Ansible-managed environment
source-env ~/.config/ansible_generated/common.nu

# Clean up any literal $HOME entries in PATH
$env.PATH = ($env.PATH | split row (char esep) | where {|p| not ($p | str starts-with '$HOME')} | str join (char esep))

# Starship prompt initialization
# This needs to be in env.nu for proper setup
$env.STARSHIP_SHELL = "nu"
mkdir ~/.cache/starship
starship init nu | save -f ~/.cache/starship/init.nu
{{- end -}}